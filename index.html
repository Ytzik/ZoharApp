<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ZOHAR APP</title>
    <style>
        /* עיצוב בסיסי לסלולרי */
        body { 
            font-family: system-ui, -apple-system, sans-serif; 
            margin: 0; 
            background: #f4f4f9; 
            padding-bottom: 80px; 
            user-select: none;
        }
        
        header { 
            background: #2c3e50; 
            color: white; 
            text-align: center; 
            padding: 15px; 
            position: sticky; 
            top: 0; 
            z-index: 100;
        }

        .container { padding: 15px; }
        
        /* כרטיסים ותצוגה */
        .card { 
            background: white; 
            padding: 20px; 
            border-radius: 15px; 
            margin-bottom: 15px; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
        }

        /* הסתרת דפים */
        .page { display: none; }
        .page.active { display: block; }

        /* כפתורי ניווט תחתונים */
        .nav-bar { 
            position: fixed; 
            bottom: 0; 
            width: 100%; 
            background: white; 
            display: flex; 
            height: 70px; 
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }
        
        .nav-btn { 
            flex: 1; 
            border: none; 
            background: none; 
            font-size: 18px; 
            font-weight: bold; 
            color: #7f8c8d;
        }
        
        .nav-btn.active { color: #3498db; }

        /* כפתורי פעולה */
        .btn-action { 
            background: #27ae60; 
            color: white; 
            border: none; 
            padding: 12px 20px; 
            border-radius: 10px; 
            font-size: 16px;
            width: 100%;
            margin-top: 10px;
        }

        input { 
            width: 100%; 
            padding: 15px; 
            border: 2px solid #ddd; 
            border-radius: 10px; 
            font-size: 16px; 
            box-sizing: border-box;
        }
    </style>
</head>
<body>

<header>
    <h2 id="main-title">תרופות שלי</h2>
</header>

<div id="page-meds" class="page active">
    <div class="container">
        <div class="card">
            <input type="text" id="med-input" placeholder="שם התרופה...">
            <button class="btn-action" onclick="doAddMed()">הוסף תרופה חדשה</button>
        </div>
        <div id="med-list"></div>
    </div>
</div>

<div id="page-history" class="page">
    <div class="container">
        <h3>היסטוריית נטילות</h3>
        <div id="history-list"></div>
    </div>
</div>

<div id="page-settings" class="page">
    <div class="container">
        <div class="card">
            <button onclick="doReset()" style="background:#e74c3c; color:white; border:none; padding:15px; width:100%; border-radius:10px;">איפוס כל הנתונים</button>
        </div>
    </div>
</div>

<nav class="nav-bar">
    <button class="nav-btn active" onclick="goTo('meds', this)">תרופות</button>
    <button class="nav-btn" onclick="goTo('history', this)">יומן</button>
    <button class="nav-btn" onclick="goTo('settings', this)">הגדרות</button>
</nav>

<script>
    // ניווט פשוט
    function goTo(pageId, btn) {
        // הסתרת כל הדפים
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        // הצגת הדף הנבחר
        document.getElementById('page-' + pageId).classList.add('active');
        
        // עדכון כפתורים
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        if(pageId === 'history') renderHistory();
    }

    // פונקציות נתונים
    function getMeds() { return JSON.parse(localStorage.getItem('z_meds') || '[]'); }
    function saveMeds(data) { localStorage.setItem('z_meds', JSON.stringify(data)); }
    function getLogs() { return JSON.parse(localStorage.getItem('z_logs') || '[]'); }

    function doAddMed() {
        const name = document.getElementById('med-input').value;
        if(!name) return;
        let meds = getMeds();
        meds.push({ id: Date.now(), name: name });
        saveMeds(meds);
        document.getElementById('med-input').value = '';
        renderMeds();
    }

    function takeMed(name) {
        let logs = getLogs();
        logs.unshift({ name: name, time: new Date().toLocaleString('he-IL') });
        localStorage.setItem('z_logs', JSON.stringify(logs.slice(0, 30)));
        alert("נרשם: " + name);
    }

    function renderMeds() {
        const meds = getMeds();
        const list = document.getElementById('med-list');
        list.innerHTML = meds.map(m => `
            <div class="card" style="display:flex; justify-content:space-between; align-items:center;">
                <strong>${m.name}</strong>
                <button class="btn-action" style="width:auto; margin:0;" onclick="takeMed('${m.name}')">בוצע</button>
            </div>
        `).join('');
    }

    function renderHistory() {
        const logs = getLogs();
        document.getElementById('history-list').innerHTML = logs.map(l => `
            <div class="card">
                <strong>${l.name}</strong><br>
                <small style="color:#7f8c8d">${l.time}</small>
            </div>
        `).join('');
    }

    function doReset() {
        if(confirm("למחוק הכל?")) { localStorage.clear(); location.reload(); }
    }

    // הפעלה
    renderMeds();
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ZoharApp Pro - Design Edition</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;800&display=swap');
        
        :root {
            --rose: #fda4af; --rose-dark: #fb7185;
            --indigo: #818cf8; --indigo-dark: #6366f1;
            --amber: #fbbf24; --green: #34d399;
            --blue: #60a5fa; --cyan: #22d3ee;
            --bg: #f1f5f9; --card-bg: #ffffff; --text: #0f172a;
        }

        body.night-mode {
            --bg: #020617; --card-bg: #1e293b; --text: #f8fafc;
        }

        * { box-sizing: border-box; font-family: 'Assistant', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg); color: var(--text); margin: 0; transition: 0.4s; min-height: 100vh; }
        .container { max-width: 450px; margin: 0 auto; padding: 20px; }

        /* Header */
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .logo { font-weight: 800; font-size: 22px; color: var(--rose-dark); letter-spacing: -1px; }

        /* Summary Card - Glassmorphism */
        .summary-box {
            background: linear-gradient(135deg, var(--rose-dark), #f43f5e);
            border-radius: 24px; padding: 20px; color: white;
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;
            box-shadow: 0 10px 25px -5px rgba(244, 63, 94, 0.4);
            margin-bottom: 25px; position: relative; overflow: hidden;
        }
        .summary-box::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        }
        .sum-item { text-align: center; position: relative; z-index: 1; }
        .sum-val { font-size: 24px; font-weight: 800; display: block; }
        .sum-lbl { font-size: 11px; opacity: 0.8; font-weight: 600; }

        /* Bento Grid */
        .bento-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; }
        
        .bento-card {
            background: var(--card-bg); border-radius: 24px; padding: 18px;
            display: flex; flex-direction: column; justify-content: space-between;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid rgba(255,255,255,0.1);
            cursor: pointer; transition: all 0.2s ease; position: relative; overflow: hidden;
        }
        .bento-card:active { transform: scale(0.95); }
        .bento-card.large { grid-column: span 2; flex-direction: row; align-items: center; }
        
        .card-icon { font-size: 28px; margin-bottom: 10px; }
        .card-title { font-weight: 800; font-size: 16px; margin: 0; }
        .card-info { font-size: 11px; opacity: 0.6; font-weight: 600; margin-top: 4px; }
        
        /* Specific Colors */
        .c-nursing { border-bottom: 5px solid var(--rose-dark); }
        .c-bottle { border-bottom: 5px solid var(--blue); }
        .c-diaper { border-bottom: 5px solid var(--amber); }
        .c-sleep { border-bottom: 5px solid var(--indigo-dark); }
        .c-sleep.active-sleep { background: var(--indigo-dark); color: white; animation: pulse 2s infinite; }

        /* Screens */
        .screen { display: none; opacity: 0; transform: scale(0.98); transition: 0.3s ease; }
        .screen.active { display: block; opacity: 1; transform: scale(1); }

        /* UI Elements */
        .btn-main { 
            width: 100%; padding: 16px; border-radius: 20px; border: none; 
            font-weight: 800; font-size: 16px; cursor: pointer; margin-top: 10px;
        }
        .timer { font-size: 60px; font-weight: 800; text-align: center; margin: 30px 0; color: var(--rose-dark); letter-spacing: -2px; }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.8; } 100% { opacity: 1; } }
        #toast { 
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            background: #1e293b; color: white; padding: 12px 25px; border-radius: 50px;
            font-weight: 700; opacity: 0; transition: 0.4s; z-index: 9999;
        }
        #toast.show { opacity: 1; bottom: 40px; }
    </style>
</head>
<body>

<div id="toast">× ×©××¨ ×‘×”×¦×œ×—×” âœ¨</div>

<div class="container">
    <header>
        <div class="logo">Zohar.</div>
        <button onclick="Actions.toggleTheme()" style="background:var(--card-bg); border:none; width:40px; height:40px; border-radius:12px; font-size:18px; cursor:pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.05);">ğŸŒ“</button>
    </header>

    <div id="scr-home" class="screen active">
        <div class="summary-box">
            <div class="sum-item"><span class="sum-val" id="sum-meals">0</span><span class="sum-lbl">××¨×•×—×•×ª</span></div>
            <div class="sum-item"><span class="sum-val" id="sum-diapers">0</span><span class="sum-lbl">×—×™×ª×•×œ×™×</span></div>
            <div class="sum-item"><span class="sum-val" id="sum-sleep">0</span><span class="sum-lbl">×©×™× ×” (×©')</span></div>
        </div>

        <div class="bento-grid">
            <div class="bento-card large c-nursing" onclick="Navigation.show('scr-nursing')">
                <div style="flex:1">
                    <div class="card-icon">ğŸ¤±</div>
                    <h3 class="card-title">×”× ×§×”</h3>
                    <div class="card-info" id="inf-nursing">×œ×—×¥ ×œ×”×ª×—×œ×”</div>
                </div>
                <div style="font-size:24px; opacity:0.2">â¯</div>
            </div>

            <div class="bento-card c-bottle" onclick="Actions.addBottle()">
                <div class="card-icon">ğŸ¼</div>
                <h3 class="card-title">×‘×§×‘×•×§</h3>
                <div class="card-info" id="inf-bottle">×ª×™×¢×•×“ ××”×™×¨</div>
            </div>

            <div class="bento-card c-diaper" onclick="Navigation.show('scr-diaper')">
                <div class="card-icon">âœ¨</div>
                <h3 class="card-title">×—×™×ª×•×œ</h3>
                <div class="card-info" id="inf-diaper">××—×¨×•×Ÿ: -</div>
            </div>

            <div id="card-sleep" class="bento-card c-sleep" onclick="Navigation.show('scr-sleep')">
                <div class="card-icon">ğŸŒ™</div>
                <h3 class="card-title">×©×™× ×”</h3>
                <div class="card-info" id="inf-sleep">×œ×™×œ×” ×˜×•×‘</div>
            </div>

            <div class="bento-card" onclick="Navigation.show('scr-measures')">
                <div class="card-icon">ğŸ“ˆ</div>
                <h3 class="card-title">××“×“×™×</h3>
                <div class="card-info">××©×§×œ ×•×’×•×‘×”</div>
            </div>

            <div class="bento-card" onclick="Navigation.show('scr-meds')">
                <div class="card-icon">ğŸ’Š</div>
                <h3 class="card-title">×ª×¨×•×¤×•×ª</h3>
                <div class="card-info" id="inf-meds">×‘×“×™×§×ª × ×˜×™×œ×”</div>
            </div>
        </div>

        <button class="btn-main" style="background:var(--card-bg); color:var(--text); box-shadow:0 4px 15px rgba(0,0,0,0.05);" onclick="Navigation.show('scr-calendar')">ğŸ“… ×™×•××Ÿ ×¤×¢×™×œ×•×ª ××œ×</button>
        <button class="btn-main" style="background:none; color:var(--slate); font-size:13px; text-decoration:underline;" onclick="Navigation.show('scr-settings')">×”×’×“×¨×•×ª ×•×“×•×—×•×ª</button>
    </div>

    <div id="scr-nursing" class="screen">
        <h2 style="text-align:center">×”× ×§×”</h2>
        <div class="summary-box" style="background:var(--card-bg); color:var(--text); box-shadow:none; border:1px solid #eee;">
             <div class="sum-item"><span class="sum-val" id="last-meal-time" style="color:var(--rose-dark)">-</span><span class="sum-lbl" style="color:var(--text)">×©×¢×” ××—×¨×•× ×”</span></div>
             <div class="sum-item"><span class="sum-val" id="last-side-info" style="color:var(--rose-dark)">-</span><span class="sum-lbl" style="color:var(--text)">×¦×“ ××—×¨×•×Ÿ</span></div>
        </div>
        <div id="n-timer" class="timer">00:00</div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:15px;">
            <button id="n-R" class="btn-main" style="background:var(--card-bg); height:120px;" onclick="Actions.toggleNursing('×™××™×Ÿ')">×™××™×Ÿ</button>
            <button id="n-L" class="btn-main" style="background:var(--card-bg); height:120px;" onclick="Actions.toggleNursing('×©×××œ')">×©×××œ</button>
        </div>
        <button class="btn-main" style="background:var(--green); color:white; margin-top:20px;" onclick="Actions.finishNursing()">×¡×™×•× ×•×¨×™×©×•× ××¨×•×—×” âœ…</button>
        <button class="btn-main" style="background:none;" onclick="Navigation.show('scr-home')">×—×–×¨×”</button>
    </div>

    <div id="scr-sleep" class="screen">
        <h2 style="text-align:center">×©×™× ×”</h2>
        <div id="s-timer" class="timer">00:00</div>
        <button id="s-toggle" class="btn-main" style="height:150px; background:var(--indigo-dark); color:white; font-size:22px;" onclick="Actions.toggleSleep()">×œ×™×œ×” ×˜×•×‘ ğŸŒ™</button>
        <button class="btn-main" style="background:none;" onclick="Navigation.show('scr-home')">×—×–×¨×”</button>
    </div>

    <div id="scr-diaper" class="screen">
        <h2 style="text-align:center">×—×™×ª×•×œ</h2>
        <div class="bento-grid">
            <div class="bento-card" onclick="Actions.logSimple('×—×™×ª×•×œ','ğŸ’¦ ×¤×™×¤×™')"><span style="font-size:40px">ğŸ’¦</span><br>×¤×™×¤×™</div>
            <div class="bento-card" onclick="Actions.logSimple('×—×™×ª×•×œ','ğŸ’© ×§×§×™')"><span style="font-size:40px">ğŸ’©</span><br>×§×§×™</div>
            <div class="bento-card large" onclick="Actions.logSimple('×—×™×ª×•×œ','ğŸŒˆ ×’× ×•×’×')"><span style="font-size:40px">ğŸŒˆ</span><br>×’× ×•×’×</div>
        </div>
        <button class="btn-main" onclick="Navigation.show('scr-home')">×‘×™×˜×•×œ</button>
    </div>

    <div id="scr-meds" class="screen">
        <h2 style="text-align:center">ğŸ’Š ×ª×¨×•×¤×•×ª</h2>
        <div class="bento-card large">
            <div style="width:100%">
                <input type="text" id="med-name" placeholder="×©× ×ª×¨×•×¤×”">
                <div style="display:flex; gap:10px;">
                    <input type="text" id="med-dosage" placeholder="××™× ×•×Ÿ">
                    <input type="text" id="med-interval" placeholder="×ª×“×™×¨×•×ª">
                </div>
                <button class="btn-main" style="background:var(--indigo-dark); color:white;" onclick="Actions.addMed()">×”×•×¡×£ ×ª×¨×•×¤×” +</button>
            </div>
        </div>
        <div id="med-list-container" style="margin-top:20px;"></div>
        <button class="btn-main" onclick="Navigation.show('scr-home')">×—×–×¨×”</button>
    </div>

    <div id="scr-measures" class="screen">
        <h2 style="text-align:center">ğŸ“ˆ ××“×“×™×</h2>
        <div class="bento-card large">
            <div style="width:100%; display:flex; gap:10px;">
                <input type="number" id="m-weight" step="0.001" placeholder="××©×§×œ (×§×´×’)">
                <input type="number" id="m-height" step="0.1" placeholder="×’×•×‘×” (×¡×´×)">
            </div>
            <button class="btn-main" style="background:var(--indigo-dark); color:white; width:100px; margin-right:10px;" onclick="Actions.saveMeasure()">×©××•×¨</button>
        </div>
        <div class="bento-card large"><canvas id="weightChart"></canvas></div>
        <div class="bento-card large"><canvas id="heightChart"></canvas></div>
        <button class="btn-main" onclick="Navigation.show('scr-home')">×—×–×¨×”</button>
    </div>

    <div id="scr-calendar" class="screen">
        <button class="btn-main" style="background:var(--green); color:white;" onclick="Actions.shareWhatsApp()">ğŸ“¤ ×©×™×ª×•×£ WhatsApp</button>
        <div id="cal-grid" class="calendar-grid" style="display:grid; grid-template-columns:repeat(7,1fr); gap:5px; margin:20px 0;"></div>
        <div id="day-logs-container"></div>
        <button class="btn-main" onclick="Navigation.show('scr-home')">×—×–×¨×”</button>
    </div>

    <div id="scr-settings" class="screen">
        <h2 style="text-align:center">×”×’×“×¨×•×ª</h2>
        <div class="bento-card large" onclick="window.print()">ğŸ“‹ ×”×›× ×ª ×“×•×— ×œ×¨×•×¤× (PDF)</div>
        <div class="bento-card large" onclick="DataStore.export()">ğŸ“¥ ×”×•×¨×“×ª ×’×™×‘×•×™ × ×ª×•× ×™×</div>
        <div class="bento-card large" style="border-bottom-color:var(--red)" onclick="DataStore.clearAll()">âš ï¸ ××—×™×§×ª ×›×œ ×”× ×ª×•× ×™×</div>
        <button class="btn-main" onclick="Navigation.show('scr-home')">×—×–×¨×”</button>
    </div>
</div>

<script>
    /* DATA & LOGIC (Same stable core, minor UI updates) */
    const DataStore = {
        logs: [], meds: [], measures: [], lastSide: "-", sleepStart: null,
        load() {
            this.logs = JSON.parse(localStorage.getItem('z_logs_v13')) || [];
            this.meds = JSON.parse(localStorage.getItem('z_meds_v13')) || [];
            this.measures = JSON.parse(localStorage.getItem('z_measures_v13')) || [];
            this.lastSide = localStorage.getItem('z_lastSide') || "-";
            this.sleepStart = localStorage.getItem('z_sleepStart') || null;
        },
        save() {
            localStorage.setItem('z_logs_v13', JSON.stringify(this.logs));
            localStorage.setItem('z_meds_v13', JSON.stringify(this.meds));
            localStorage.setItem('z_measures_v13', JSON.stringify(this.measures));
            localStorage.setItem('z_lastSide', this.lastSide);
            if(this.sleepStart) localStorage.setItem('z_sleepStart', this.sleepStart); else localStorage.removeItem('z_sleepStart');
        },
        export() {
            const blob = new Blob([JSON.stringify({logs:this.logs, meds:this.meds, measures:this.measures})], {type:'application/json'});
            const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'Zohar_Backup.json'; a.click();
        },
        clearAll() { if(confirm("×œ××—×•×§ ×”×›×œ?")) { localStorage.clear(); location.reload(); } }
    };

    const Navigation = {
        show(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            setTimeout(() => {
                document.getElementById(id).classList.add('active');
                if(id === 'scr-home') UI.updateDashboard();
                if(id === 'scr-meds') UI.renderMeds();
                if(id === 'scr-calendar') UI.renderCalendar();
                if(id === 'scr-measures') UI.initCharts();
                if(id === 'scr-nursing') UI.initNursingView();
                if(id === 'scr-sleep') UI.initSleepView();
            }, 50);
        }
    };

    let weightChart = null, heightChart = null;
    const UI = {
        updateDashboard() {
            const today = new Date().toLocaleDateString('en-GB');
            const todayLogs = DataStore.logs.filter(l => l.date === today);
            
            document.getElementById('sum-meals').innerText = todayLogs.filter(l => l.type === '×”× ×§×”' || l.type === '×‘×§×‘×•×§').length;
            document.getElementById('sum-diapers').innerText = todayLogs.filter(l => l.type === '×—×™×ª×•×œ').length;
            
            let totalMin = 0;
            todayLogs.filter(l => l.type === '×©×™× ×”').forEach(l => { const m = l.detail.match(/(\d+) ×“×§×•×ª/); if(m) totalMin += parseInt(m[1]); });
            document.getElementById('sum-sleep').innerText = (totalMin/60).toFixed(1);

            const lastMeal = DataStore.logs.find(l => l.type === '×”× ×§×”' || l.type === '×‘×§×‘×•×§');
            const lastDiaper = DataStore.logs.find(l => l.type === '×—×™×ª×•×œ');
            
            document.getElementById('inf-nursing').innerText = lastMeal ? `××—×¨×•×Ÿ: ${lastMeal.time}` : '×˜×¨× ×ª×•×¢×“';
            document.getElementById('inf-diaper').innerText = lastDiaper ? `××—×¨×•×Ÿ: ${lastDiaper.time}` : '××—×¨×•×Ÿ: -';
            
            const sCard = document.getElementById('card-sleep');
            if(DataStore.sleepStart) {
                sCard.classList.add('active-sleep');
                document.getElementById('inf-sleep').innerText = "×™×©× ×” ×›×¨×’×¢...";
            } else {
                sCard.classList.remove('active-sleep');
                document.getElementById('inf-sleep').innerText = "×œ×—×¥ ×œ×ª×™×¢×•×“";
            }
        },
        renderMeds() {
            const container = document.getElementById('med-list-container');
            container.innerHTML = DataStore.meds.map(m => `
                <div class="bento-card large" style="margin-bottom:10px;">
                    <div style="flex:1"><b>${m.name}</b><br><small>${m.dosage} | ${m.interval}</small></div>
                    <button class="btn-main" style="width:auto; background:var(--green); color:white; padding:10px 20px;" onclick="Actions.logSimple('×ª×¨×•×¤×”', '${m.name}')">× ×˜×™×œ×”</button>
                    <button style="background:none; border:none; margin-right:10px;" onclick="Actions.deleteMed(${m.id})">ğŸ—‘ï¸</button>
                </div>`).join('');
        },
        initCharts() {
            const data = DataStore.measures.slice(-7);
            const last = DataStore.measures[DataStore.measures.length-1] || {weight:'-', height:'-'};
            if(weightChart) weightChart.destroy();
            weightChart = new Chart(document.getElementById('weightChart'), { type:'line', data:{labels:data.map(d=>d.date), datasets:[{label:`××©×§×œ (${last.weight} ×§"×’)`, data:data.map(d=>d.weight), borderColor:'#6366f1'}]}});
            if(heightChart) heightChart.destroy();
            heightChart = new Chart(document.getElementById('heightChart'), { type:'line', data:{labels:data.map(d=>d.date), datasets:[{label:`×’×•×‘×” (${last.height} ×¡"×)`, data:data.map(d=>d.height), borderColor:'#10b981'}]}});
        },
        initNursingView() {
            const lastM = DataStore.logs.find(l => l.type === '×”× ×§×”' || l.type === '×‘×§×‘×•×§');
            document.getElementById('last-meal-time').innerText = lastM ? lastM.time : '-';
            document.getElementById('last-side-info').innerText = DataStore.lastSide;
        },
        initSleepView() {
            const btn = document.getElementById('s-toggle');
            if(DataStore.sleepStart) { btn.innerText = "×‘×•×§×¨ ×˜×•×‘ â˜€ï¸"; btn.style.background = "var(--amber)"; }
            else { btn.innerText = "×œ×™×œ×” ×˜×•×‘ ğŸŒ™"; btn.style.background = "var(--indigo-dark)"; }
        },
        renderCalendar(dateStr) {
            const selected = dateStr || new Date().toLocaleDateString('en-GB');
            const grid = document.getElementById('cal-grid'); grid.innerHTML = '';
            for(let i=1; i<=31; i++) {
                const d = i.toString().padStart(2,'0') + "/" + (new Date().getMonth()+1).toString().padStart(2,'0') + "/" + new Date().getFullYear();
                const div = document.createElement('div');
                div.style = `padding:10px; text-align:center; border-radius:10px; cursor:pointer; background:${selected===d?'var(--rose-dark)':'var(--card-bg)'}; color:${selected===d?'white':'var(--text)'}`;
                div.innerText = i; div.onclick = () => this.renderCalendar(d); grid.appendChild(div);
            }
            const filtered = DataStore.logs.filter(l => l.date === selected);
            document.getElementById('day-logs-container').innerHTML = filtered.map(l => `
                <div style="background:var(--card-bg); padding:15px; border-radius:15px; margin-bottom:10px; display:flex; justify-content:space-between;">
                    <div><b>${l.time}</b> | ${l.type} - ${l.detail}</div>
                    <button style="border:none; background:none;" onclick="Actions.deleteLog(${l.ts})">ğŸ—‘ï¸</button>
                </div>`).join('') || '××™×Ÿ × ×ª×•× ×™× ×œ×™×•× ×–×”';
        },
        showToast() { const t = document.getElementById('toast'); t.className = "show"; setTimeout(()=>t.className="", 3000); }
    };

    let nInterval = null, nStart = null, nActiveSide = null, nDurations = {R:0, L:0};
    const Actions = {
        logSimple(type, detail, side) {
            if(side) DataStore.lastSide = side;
            DataStore.logs.unshift({ type, detail, time: new Date().toLocaleTimeString('he-IL',{hour:'2-digit', minute:'2-digit'}), ts: Date.now(), date: new Date().toLocaleDateString('en-GB') });
            DataStore.save(); UI.showToast(); Navigation.show('scr-home');
        },
        deleteLog(ts) { if(confirm("×œ××—×•×§?")) { DataStore.logs = DataStore.logs.filter(l => l.ts !== ts); DataStore.save(); UI.renderCalendar(); } },
        addBottle() { const ml = prompt("×›××•×ª ×‘×\"×œ:"); if(ml) this.logSimple('×‘×§×‘×•×§', ml + ' ×"×œ'); },
        toggleNursing(side) {
            if(nActiveSide === side) {
                clearInterval(nInterval); nDurations[side==='×™××™×Ÿ'?'R':'L'] += Math.round((Date.now()-nStart)/1000);
                nActiveSide = null; document.querySelectorAll('.btn-main').forEach(b => b.style.boxShadow = "none");
            } else {
                if(nActiveSide) this.toggleNursing(nActiveSide);
                nActiveSide = side; nStart = Date.now();
                document.getElementById(side==='×™××™×Ÿ'?'n-R':'n-L').style.boxShadow = "0 0 15px var(--rose-dark)";
                nInterval = setInterval(() => {
                    const sec = Math.floor((Date.now()-nStart)/1000) + nDurations[side==='×™××™×Ÿ'?'R':'L'];
                    document.getElementById('n-timer').innerText = Math.floor(sec/60).toString().padStart(2,'0')+":"+(sec%60).toString().padStart(2,'0');
                }, 1000);
            }
        },
        finishNursing() {
            if(nDurations.R || nDurations.L) {
                this.logSimple('×”× ×§×”', `×™××™×Ÿ: ${Math.floor(nDurations.R/60)} ×“×§', ×©×××œ: ${Math.floor(nDurations.L/60)} ×“×§'`, nActiveSide || (nDurations.R > nDurations.L ? '×™××™×Ÿ' : '×©×××œ'));
                nDurations = {R:0, L:0}; clearInterval(nInterval);
            } else Navigation.show('scr-home');
        },
        toggleSleep() {
            if(!DataStore.sleepStart) { DataStore.sleepStart = Date.now(); DataStore.save(); UI.initSleepView(); UI.showToast(); }
            else {
                const diffMin = Math.round((Date.now()-DataStore.sleepStart)/60000);
                this.logSimple('×©×™× ×”', `××©×š: ${diffMin} ×“×§×•×ª (${(diffMin/60).toFixed(1)} ×©×¢×•×ª)`);
                DataStore.sleepStart = null; DataStore.save(); Navigation.show('scr-home');
            }
        },
        addMed() {
            const n = document.getElementById('med-name').value, d = document.getElementById('med-dosage').value, i = document.getElementById('med-interval').value;
            if(!n) return;
            DataStore.meds.push({ name: n, dosage: d, interval: i, id: Date.now() });
            DataStore.save(); UI.renderMeds();
        },
        deleteMed(id) { if(confirm("×œ××—×•×§?")) { DataStore.meds = DataStore.meds.filter(m => m.id !== id); DataStore.save(); UI.renderMeds(); } },
        saveMeasure() {
            const w = document.getElementById('m-weight').value, h = document.getElementById('m-height').value;
            if(!w && !h) return;
            DataStore.measures.push({ date: new Date().toLocaleDateString('en-GB').slice(0,5), weight: parseFloat(w), height: parseFloat(h) });
            DataStore.save(); Navigation.show('scr-home');
        },
        shareWhatsApp() {
            const today = new Date().toLocaleDateString('en-GB'), logs = DataStore.logs.filter(l => l.date === today);
            let txt = `*×“×™×•×•×— ×™×•××™ - ×–×•×”×¨ (${today})*\n\n`;
            logs.slice().reverse().forEach(l => txt += `${l.time} | *${l.type}* | ${l.detail}\n`);
            window.open("https://wa.me/?text=" + encodeURIComponent(txt));
        },
        toggleTheme() { document.body.classList.toggle('night-mode'); }
    };

    DataStore.load();
    UI.updateDashboard();
</script>
</body>
</html>


